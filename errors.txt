#Kryptering av tekstfiler for sikker sletting
# Enkel kryptering av tekst med fernet

from cryptography.fernet import fernet

def generer_nokkel() -> bytes:
    """ Lagar ei sterk, tilfeldig nøkkel (Fernet)."""
    return Fernet.generate_key()
    
def lag_fernet(nokkel: bytes) -> Fernet:
        """lager eit Fernet-objekt frå nøkkelen."""
        return Fernet(nokkel)
        
def krypter_tekst(fernet: Fernet, klartekst:str) -> bytes:
             """Krypterer tekst (str) -> bytes."""
             return
             fernet.encrypt(klartekst.encode("utf-8"))
             
def dekrypter_tekst(fernet: Fernet, kryptert:bytes) -> str:
                 """Dekrypterer bytes -> tekst (str)."""
                 return
                 fernet.decrypt(kryptert).decode("utf-8")
                 # 1) generer nøkkel (seinare skal i lagre denne fil)
                 nokkel = generer_nokkel()
                 print(f"[INFO] Generert nøkkel:{nokkel.decode()}")
                 
                 # 2) lag krypteraren
                 f = lag_fernet(nokkel)
                 
                 # 3) teksten vi vil kryptere
                 klartekst = "i have a hole in my shoes."
                 print(f"[INFO] Klartekst: {klartekst}")
                 
                 # 4) Krypter
                 kryptert = krypter_tekst(f, klartekst)
                 print(f"[INFO] Kryptert (bytes): {kryptert}")
                 
                 # 5) dekrypter tilbake
                 dekryptert = dekrypter_tekst(f, kryptert)
                 print(f"[INFO] Dekryptert: {dekryptert}")
                 
                 #6 Sjekk at alt stemmer
                 assert dekryptert == klartekst, "Dekryptert tekst er ikkje lik orginalen!"
                 print("[OK] Kryptering/dekryptering fungerer!")
                 
                 def main():
                 if __name___ == "__main__":
                     main()
                 
                 
                 
             
             
    
